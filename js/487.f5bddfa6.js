"use strict";(self["webpackChunkmetahare_front"]=self["webpackChunkmetahare_front"]||[]).push([[487],{3487:function(e,t,s){s.r(t),s.d(t,{default:function(){return Fe}});var l=s(3396);const a={class:"w-100 ms-md-9 ms-0"},o={class:"w-100 mb-6"},i={class:"d-flex align-items-center rounded-2 p-3 shadow-lg bg-white"},d={class:"rounded-circle me-3",style:{height:"48px",width:"48px"}},n=["src"];function r(e,t,s,r,c,m){const p=(0,l.up)("Loading"),u=(0,l.up)("PostsList"),h=(0,l.up)("createPostModal");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(p,{active:c.isLoading},null,8,["active"]),(0,l._)("div",a,[(0,l._)("div",o,[(0,l._)("div",i,[(0,l._)("div",d,[(0,l._)("img",{src:e.profile.avatar,alt:"",style:{height:"48px",width:"48px"},class:"rounded-circle"},null,8,n)]),(0,l._)("button",{type:"button",class:"w-100 rounded-4 border-0 text-start ps-5 py-2",onClick:t[0]||(t[0]=t=>e.openPostModal(!0))}," 今天在想什麼呢? ")])]),(0,l.Wm)(u),(0,l.Wm)(h,{ref:"createPostModal",post:e.tempPost,onCreatePost:e.createPost},null,8,["post","onCreatePost"])])],64)}var c=s(7139),m=s(9242);const p={class:"w-100 py-3 px-6 rounded-2 shadow-lg bg-white mb-6"},u={class:"border-bottom pb-3 mb-2"},h={class:"d-flex align-items-center justify-content-between"},b={class:"d-flex align-items-center"},g={class:"me-3"},_={class:"rounded-circle"},w=["src"],f={class:""},v={class:"dropdown"},x=(0,l._)("a",{class:"post-edit rounded-2",href:"#",role:"button",id:"post.id","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,l._)("span",{class:"material-icons"}," more_horiz ")],-1),y={class:"dropdown-menu","aria-labelledby":"post.id"},k=["onClick"],P=["onClick"],C={class:"border-bottom pb-3 mb-2"},D={key:0,class:"rounded-3 mt-3",style:{"max-height":"740px"}},L=["src"],z={class:"border-bottom pb-2 mb-3 d-flex align-items-center justify-content-center"},Z=["onClick"],$={key:0,class:"d-flex align-items-center"},M=(0,l._)("span",{class:"material-icons fs-4xl me-2",style:{color:"#de5d4b"}}," favorite ",-1),I=(0,l._)("span",{class:""},"喜歡",-1),j=[M,I],W={key:1,class:"d-flex align-items-center",style:{color:"#b9b9b9"}},A=(0,l._)("span",{class:"material-icons fs-4xl me-2"}," favorite_border",-1),E=(0,l._)("span",{class:""},"喜歡",-1),H=[A,E],K={class:"border-bottom pb-2 mb-3 d-flex align-items-center"},Y={class:"me-2"},T=["data-bs-target"],B={key:0,class:"fs-xs text-nowrap",style:{color:"#b9b9b9"}},F=(0,l._)("span",{class:"material-icons fs-lg me-2"}," favorite_border",-1),N=(0,l._)("span",{class:""},"成為第一個喜歡朋友",-1),U=[F,N],q={key:1,class:"fs-xs"},O=(0,l._)("span",{class:"material-icons fs-lg me-2",style:{color:"#de5d4b"}}," favorite ",-1),S={class:"d-flex align-items-center justify-content-start"},V={type:"button",class:"border-0 bg-white d-flex"},G={key:0,class:"fs-xs text-nowrap",style:{color:"#b9b9b9"}},J=(0,l._)("span",{class:"material-icons fs-lg me-2"}," chat_bubble_outline ",-1),Q=(0,l._)("span",{class:"text-nowrap"},"尚無留言",-1),R=[J,Q],X={key:1,class:"fs-xs text-nowrap"},ee=(0,l._)("span",{class:"material-icons fs-lg me-2 text-primary"}," comment ",-1),te={class:"d-flex"},se={class:"rounded-circle me-3",style:{width:"36px",height:"36px"}},le=["src"],ae={class:"py-2 px-3 rounded-3",style:{"background-color":"#f4f4f4"}},oe={class:"d-flex"},ie={class:"text-black-50 fs-xs"},de={class:"d-flex align-items-center w-100"},ne={class:"me-3"},re={class:"rounded-circle",style:{height:"40px",width:"40px"}},ce=["src"],me={class:"comments-box d-flex justify-content-between rounded-pill border border-light w-100"},pe=["onKeydown"],ue=["onClick","disabled"],he=(0,l.Uk)(" 留言 "),be={key:0,class:"spinner-border spinner-border-sm mt-1 ms-2",role:"status"},ge=(0,l._)("span",{class:"visually-hidden"},"Loading...",-1),_e=[ge],we=["id"],fe={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},ve={class:"modal-content"},xe=(0,l._)("div",{class:"modal-header"},[(0,l._)("h1",{class:"modal-title fw-bold fs-lg text-primary text-center"}," 說讚的用戶 "),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ye={class:"modal-body"},ke={class:"py-2"},Pe={class:"d-flex align-items-center"},Ce={class:"rounded-circle me-3",style:{width:"36px",height:"36px"}},De=["src"],Le={class:""};function ze(e,t,s,a,o,i){const d=(0,l.up)("Loading"),n=(0,l.up)("createPostModal"),r=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(d,{active:o.isLoading},null,8,["active"]),(0,l.Wm)(n,{ref:"createPostModal",post:o.tempPost,onCreatePost:e.createPost},null,8,["post","onCreatePost"]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.posts,((s,a)=>((0,l.wg)(),(0,l.iD)("div",{class:"w-100 mb-6",key:s.id},[(0,l._)("div",p,[(0,l._)("div",u,[(0,l._)("div",h,[(0,l._)("div",b,[(0,l._)("div",g,[(0,l._)("div",_,[(0,l._)("img",{src:s.user.avatar,alt:"",class:"rounded-circle avatar-md",style:{width:"56px",height:"56px"}},null,8,w)])]),(0,l._)("div",f,[(0,l.Wm)(r,{to:`/profile/${s.user._id}`},{default:(0,l.w5)((()=>[(0,l.Uk)((0,c.zw)(s.user.name),1)])),_:2},1032,["to"]),(0,l._)("p",null,(0,c.zw)(o.day(s.createdAt)),1)])]),(0,l.wy)((0,l._)("div",v,[x,(0,l._)("ul",y,[(0,l._)("li",null,[(0,l._)("button",{type:"button",class:"dropdown-item",onClick:t=>e.openPostModal(!1,s)}," 編輯 ",8,k)]),(0,l._)("li",null,[(0,l._)("button",{type:"button",class:"dropdown-item",onClick:t=>e.delPost(s.id)}," 刪除 ",8,P)])])],512),[[m.F8,o.profile._id===s.user._id]])])]),(0,l._)("div",C,[(0,l._)("p",null,(0,c.zw)(s.content),1),s.image?((0,l.wg)(),(0,l.iD)("div",D,[(0,l._)("img",{src:s.image,class:"w-100 h-100 rounded-3",alt:"",style:{"max-height":"740px"}},null,8,L)])):(0,l.kq)("",!0)]),(0,l._)("div",z,[(0,l._)("button",{type:"button",class:"border-0 bg-white w-100 d-flex justify-content-center align-items-center",onClick:e=>i.likesPost(s)},[s.likes.find((e=>e._id===this.profile._id))?((0,l.wg)(),(0,l.iD)("div",$,j)):((0,l.wg)(),(0,l.iD)("div",W,H))],8,Z)]),(0,l._)("div",K,[(0,l._)("div",Y,[(0,l._)("button",{type:"button",class:"border-0 bg-white d-flex","data-bs-toggle":"modal","data-bs-target":"#likesModal"+s.id},[0===s.likes.length?((0,l.wg)(),(0,l.iD)("div",B,U)):((0,l.wg)(),(0,l.iD)("div",q,[O,(0,l._)("span",null,(0,c.zw)(s.likes.length)+"個人喜歡",1)]))],8,T)]),(0,l._)("div",S,[(0,l._)("button",V,[0===s.comments.length?((0,l.wg)(),(0,l.iD)("div",G,R)):((0,l.wg)(),(0,l.iD)("div",X,[ee,(0,l._)("span",null,(0,c.zw)(s.comments.length)+"個人留言",1)]))])])]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.comments,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"border-bottom pb-3 mb-3",key:e._id},[(0,l._)("div",te,[(0,l._)("div",se,[(0,l._)("img",{src:e.userId.avatar,style:{width:"36px",height:"36px"},alt:"",class:"rounded-circle"},null,8,le)]),(0,l._)("div",ae,[(0,l._)("div",oe,[(0,l.Wm)(r,{to:`/profile/${e.userId._id}`,class:"me-3"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,c.zw)(e.userId.name),1)])),_:2},1032,["to"]),(0,l._)("p",ie,(0,c.zw)(o.day(e.createdAt)),1)]),(0,l._)("p",null,(0,c.zw)(e.comment),1)])])])))),128)),(0,l._)("div",de,[(0,l._)("div",ne,[(0,l._)("div",re,[(0,l._)("img",{src:o.profile.avatar,style:{height:"40px",width:"40px"},alt:"",class:"rounded-circle"},null,8,ce)])]),(0,l._)("div",me,[(0,l._)("input",{type:"text",placeholder:"留言.....",class:"search-input border border-0 w-100",onInput:t[0]||(t[0]=e=>o.comments.comment=e.target.value),ref_for:!0,ref:"commentValue",onKeydown:(0,m.D2)((e=>i.createComment(s.id)),["enter"])},null,40,pe),(0,l._)("button",{onClick:e=>i.createComment(s.id),disabled:this.status.loadingItem===s.id,type:"button",class:"text-nowrap rounded-pill border-0 btn btn-primary fs-md fs-md-sm py-lg-1 px-lg-10 px-2 py-0 fw-bold"},[he,this.status.loadingItem===s.id?((0,l.wg)(),(0,l.iD)("div",be,_e)):(0,l.kq)("",!0)],8,ue)])])]),(0,l._)("div",{class:"modal fade",id:"likesModal"+s.id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[(0,l._)("div",fe,[(0,l._)("div",ve,[xe,(0,l._)("div",ye,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.likes,(e=>((0,l.wg)(),(0,l.iD)("div",ke,[(0,l._)("div",Pe,[(0,l._)("div",Ce,[(0,l._)("img",{src:e.avatar,style:{width:"36px",height:"36px"},alt:"",class:"rounded-circle"},null,8,De)]),(0,l._)("p",Le,(0,c.zw)(e.name),1)])])))),256))])])])],8,we)])))),128))],64)}var Ze=s(9743),$e=s(6732),Me=s(5601),Ie=s(6654),je=s(9544),We=s(9445),Ae=s(7615),Ee={mixins:[$e.Z,Me.Z,je.Z,We.Z,Ae.Z],data(){return{isFollow:!1,comments:{},profile:[],followers:[],dayToNow:Ze.u,day:Ze.v,tempPost:{},isNew:!1,isLoading:!1,status:{loadingItem:""},isLike:[]}},components:{createPostModal:Ie.Z},methods:{createComment(e){const t=document.cookie.split("jwt=").pop();this.status.loadingItem=e,this.$http({method:"POST",url:`https://metashare.onrender.com/api/post/${e}/comments`,headers:{Authorization:`Bearer ${t}`},data:this.comments}).then((e=>{this.$refs.commentValue.forEach((t=>{"success"===e.data.status&&(t.value="")})),this.status.loadingItem="",this.getPosts()})).catch((e=>{console.log(e),"Error"===e.response.data.status&&(alert("請輸入留言內容"),this.status.loadingItem=!1)}))},likesPost(e){if(this.isLike=e.likes.find((e=>e._id===this.profile._id)),console.log(this.isFollow),this.isLike)return void this.delLikesPost(e);const t=document.cookie.split("jwt=").pop();this.$http({method:"POST",url:`https://metashare.onrender.com/api/post/${e._id}/likes`,headers:{Authorization:`Bearer ${t}`}}).then((e=>{this.getPosts()})).catch((e=>{console.log(e)}))},delLikesPost(e){const t=document.cookie.split("jwt=").pop();this.$http({method:"DELETE",url:`https://metashare.onrender.com/api/post/${e._id}/likes`,headers:{Authorization:`Bearer ${t}`}}).then((e=>{this.getPosts()})).catch((e=>{console.log(e)}))}}},He=s(89);const Ke=(0,He.Z)(Ee,[["render",ze]]);var Ye=Ke,Te={mixins:[$e.Z,Me.Z,je.Z,We.Z],data(){return{isNew:!1,isLoading:!1}},components:{PostsList:Ye,createPostModal:Ie.Z}};const Be=(0,He.Z)(Te,[["render",r]]);var Fe=Be}}]);
//# sourceMappingURL=487.f5bddfa6.js.map